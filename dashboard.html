<h2>Customize Your Sidebar</h2>

<!-- Add New Link Button -->
<button id="addLinkBtn" class="btn">➕ Add Link</button>

<!-- Custom Links List -->
<div id="customLinks"></div>

<!-- Apply Changes Button -->
<button id="applyChangesBtn" class="btn">✔ Apply Changes</button>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        let addLinkBtn = document.getElementById("addLinkBtn");
        let applyChangesBtn = document.getElementById("applyChangesBtn");
        let customLinksDiv = document.getElementById("customLinks");

        let savedLinks = JSON.parse(localStorage.getItem("customSidebarLinks")) || [];

        function renderLinks() {
            customLinksDiv.innerHTML = "";
            savedLinks.forEach((link, index) => {
                let div = document.createElement("div");
                div.innerHTML = `
                    <input type="text" value="${link.name}" placeholder="Page Name" class="sidebar-input" id="name-${index}">
                    <input type="text" value="${link.url}" placeholder="Page URL" class="sidebar-input" id="url-${index}">
                    <button onclick="removeLink(${index})" class="btn small-btn">❌</button>
                `;
                customLinksDiv.appendChild(div);
            });
        }

        function saveLinks() {
            let newLinks = [];
            document.querySelectorAll("#customLinks div").forEach((div, index) => {
                let name = document.getElementById(`name-${index}`).value;
                let url = document.getElementById(`url-${index}`).value;
                
                if (name && url) {
                    let isSameDomain = url.includes(window.location.hostname);
                    if (!isSameDomain) {
                        let confirmExternal = confirm(`"${url}" is an external link. Are you sure?`);
                        if (!confirmExternal) return;
                    }
                    newLinks.push({ name, url });
                }
            });

            localStorage.setItem("customSidebarLinks", JSON.stringify(newLinks));
            alert("✔ Sidebar links updated!");
        }

        function removeLink(index) {
            savedLinks.splice(index, 1);
            localStorage.setItem("customSidebarLinks", JSON.stringify(savedLinks));
            renderLinks();
        }

        addLinkBtn.addEventListener("click", function () {
            savedLinks.push({ name: "", url: "" });
            renderLinks();
        });

        applyChangesBtn.addEventListener("click", function () {
            saveLinks();
        });

        renderLinks();
    });
</script>
<h2>Customize Your Sidebar</h2>

<!-- Add New Link Button -->
<button id="addLinkBtn" class="btn">➕ Add Link</button>

<!-- Custom Links List -->
<div id="customLinks"></div>

<!-- Apply Changes Button -->
<button id="applyChangesBtn" class="btn">✔ Apply Changes</button>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        let addLinkBtn = document.getElementById("addLinkBtn");
        let applyChangesBtn = document.getElementById("applyChangesBtn");
        let customLinksDiv = document.getElementById("customLinks");

        let savedLinks = JSON.parse(localStorage.getItem("customSidebarLinks")) || [];

        function renderLinks() {
            customLinksDiv.innerHTML = "";
            savedLinks.forEach((link, index) => {
                let div = document.createElement("div");
                div.innerHTML = `
                    <input type="text" value="${link.name}" placeholder="Page Name" class="sidebar-input" id="name-${index}">
                    <input type="text" value="${link.url}" placeholder="Page URL" class="sidebar-input" id="url-${index}">
                    <button onclick="removeLink(${index})" class="btn small-btn">❌</button>
                `;
                customLinksDiv.appendChild(div);
            });
        }

        function saveLinks() {
            let newLinks = [];
            document.querySelectorAll("#customLinks div").forEach((div, index) => {
                let name = document.getElementById(`name-${index}`).value;
                let url = document.getElementById(`url-${index}`).value;
                
                if (name && url) {
                    let isSameDomain = url.includes(window.location.hostname);
                    if (!isSameDomain) {
                        let confirmExternal = confirm(`"${url}" is an external link. Are you sure?`);
                        if (!confirmExternal) return;
                    }
                    newLinks.push({ name, url });
                }
            });

            localStorage.setItem("customSidebarLinks", JSON.stringify(newLinks));
            alert("✔ Sidebar links updated!");
        }

        function removeLink(index) {
            savedLinks.splice(index, 1);
            localStorage.setItem("customSidebarLinks", JSON.stringify(savedLinks));
            renderLinks();
        }

        addLinkBtn.addEventListener("click", function () {
            savedLinks.push({ name: "", url: "" });
            renderLinks();
        });

        applyChangesBtn.addEventListener("click", function () {
            saveLinks();
        });

        renderLinks();
    });
</script>
